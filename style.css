:root {
    --color-primary: #2C3E50;
    --color-secondary: #34495E;
    --color-accent: #3498DB;
    --color-success: #27AE60;
    --color-danger: #C0392B;
    --color-warning: #F39C12;
    --color-bg: #ECF0F1;
    --color-card: #FFFFFF;
}

body { font-family: 'Segoe UI', sans-serif; background: var(--color-bg); margin: 0; color: #333; }
.container { max-width: 1200px; margin: 20px auto; padding: 0 15px; }

/* HEADER */
header { background: var(--color-primary); color: white; padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center; }
.logo { font-weight: bold; font-size: 1.5rem; }
nav a { color: #bdc3c7; text-decoration: none; margin-left: 20px; font-weight: 500; }
nav a.active, nav a:hover { color: white; }

/* CARDS */
.dashboard-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; margin-bottom: 20px; }
.stat-card { background: var(--color-card); padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); text-align: center; }
.stat-card h3 { margin: 0; font-size: 0.85rem; color: #7f8c8d; text-transform: uppercase; }
.stat-value { font-size: 1.5rem; font-weight: bold; margin: 5px 0 0; color: var(--color-primary); }
.profit-positive { color: var(--color-success); }
.profit-negative { color: var(--color-danger); }

/* FORMS */
.form-section { 
    background: var(--color-card); 
    border-radius: 8px; 
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}

/* NOUVEAU STYLE: Plus d'espace pour les inputs dans le formulaire d'ajout (stock.html) */
.form-section .input-grid { 
    display: grid; 
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); 
    gap: 15px; 
    padding: 15px; /* Ajout d'un padding pour entourer les champs du formulaire */
} 

/* Styles pour les champs dans les modales (plus compact) */
.modal-content .input-grid {
    display: grid;
    grid-template-columns: 1fr 1fr; /* Force 2 colonnes pour les prix dans la modale */
    gap: 15px;
}

input, textarea { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; }
.list-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
.list-header input { width: 300px; }

/* BUTTONS */
button { cursor: pointer; border: none; padding: 10px 15px; border-radius: 4px; font-weight: 600; transition: 0.2s; }
.full-width-button { width: 100%; background: var(--color-primary); color: white; }
.full-width-button:hover { background: var(--color-secondary); }

.btn-vendre { background: var(--color-success); color: white; }
.btn-vendre:hover { background: #219150; }
.btn-modifier-suivi { background: var(--color-accent); color: white; }
.btn-secondary { background: #95a5a6; color: white; }
.btn-supprimer { background: var(--color-danger); color: white; }
.btn-annuler { background: #7f8c8d; color: white; }
.btn-small { margin: 2px; padding: 4px 8px; font-size: 0.8rem; }
.btn-small:hover { padding: 4px 8px; font-size: 0.8rem; background-color:#666f79; }

.action-buttons-wrapper { display: flex; gap: 5px; }

/* TABLE */
.table-responsive { overflow-x: auto; background: var(--color-card); border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
table { width: 100%; border-collapse: collapse; min-width: 800px; }
th, td { padding: 12px 15px; text-align: left; border-bottom: 1px solid #eee; }
th { background: #f8f9fa; color: #7f8c8d; font-size: 0.85rem; text-transform: uppercase; }
tr:last-child td { border-bottom: none; }

/* BADGES */
.badge { padding: 4px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: bold; }
.badge-sold { background: #e8f8f5; color: var(--color-success); border: 1px solid var(--color-success); }
.badge-stock { background: #ebf5fb; color: var(--color-accent); border: 1px solid var(--color-accent); }

.marge-positive { color: var(--color-success); font-weight: bold; }
.marge-negative { color: var(--color-danger); font-weight: bold; }

/* MODAL */
.modal { display: none; position: fixed; z-index: 100; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); backdrop-filter: blur(2px); }
.modal-content { background: white; margin: 5vh auto; padding: 25px; width: 90%; max-width: 500px; border-radius: 8px; position: relative; animation: slideIn 0.3s; }
.close-button { position: absolute; right: 20px; top: 15px; font-size: 24px; cursor: pointer; color: #aaa; }
.modal-subtitle { color: #7f8c8d; margin-top: -10px; margin-bottom: 20px; font-size: 0.9rem; }
.modal-input-group { margin-bottom: 15px; }
.modal-input-group label { display: block; margin-bottom: 5px; font-weight: 600; font-size: 0.9rem; }

/* PIECES LIST */
.input-group-piece { display: flex; gap: 10px; margin-bottom: 10px; }
.piece-item { display: flex; justify-content: space-between; padding: 8px; background: #f8f9fa; border-radius: 4px; margin-bottom: 5px; align-items: center;}

@keyframes slideIn { from { transform: translateY(-20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

.subtitle {
    color: #7f8c8d;
    margin-top: -10px;
    margin-bottom: 25px;
}

.btn-primary {
    background-color: var(--color-secondary);
    color: white;
}
.btn-primary:hover {
    background-color: #2c3e50;
}

/* Styles pour la liste des pièces dans la modale de suivi */
.piece-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
    border-bottom: 1px solid #9e9e9e;
}
.piece-item:last-child {
    border-bottom: none;
}
.piece-actions {
    display: flex;
    gap: 5px; /* Espacement entre les boutons */
    align-items: center;
}
.piece-item > span {
    font-weight: 500;
    flex-grow: 1; /* Permet au nom de prendre l'espace restant */
}
.piece-status {
    font-size: 0.8em;
    font-style: italic;
    color: var(--color-secondary);
    min-width: 80px; /* Assure que le statut ne bouge pas trop */
    text-align: right;
}
.piece-actions strong {
    min-width: 60px; /* Assure que le prix est aligné */
    text-align: right;
    margin-right: 10px;
}
.btn-warning {
    background-color: var(--color-warning);
    color: #333;
}
/* Style pour désactiver les boutons (pièces non commandées/reçues) */
.btn-small[disabled] {
    opacity: 0.5;
    cursor: not-allowed;
}


/* ==========================================================
    TABLEAU MOBILE RESPONSIVE (MEDIA QUERY) - VERSION FINALE
    ========================================================== */
@media screen and (max-width: 768px) { 
    
    /* Général: Assure que le padding/bordure n'ajoute pas de largeur */
    table, table tbody, table tr, table td {
        display: block; 
        width: 100%;
        min-width: initial;
        box-sizing: border-box; 
    }

    /* Force les cartes de stats à s'empiler */
    .dashboard-stats {
        grid-template-columns: 1fr; 
    }

    /* Cache les en-têtes du tableau classique */
    table thead {
        display: none; 
    }

    /* Style la ligne comme une carte */
    table tr {
        margin-bottom: 15px;
        border: 1px solid #ddd;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        padding: 10px;
        background: var(--color-card);
    }
    
    /* Style chaque cellule (td) : Utilisation de Flexbox pour un alignement stable */
    table td {
        display: flex !important; 
        justify-content: space-between; /* Le label va à gauche, la valeur à droite */
        align-items: center; /* Centre la valeur verticalement */
        
        padding-left: 15px !important; 
        padding-right: 15px !important; 

        position: relative;
        border: none;
        padding-bottom: 8px;
        padding-top: 8px;
        border-bottom: 1px dashed #eee; 
        word-wrap: break-word; 
        min-width: 0; /* Assure que le contenu Flex ne déborde pas */
    }
    
    table tr td:last-child {
        border-bottom: none; 
    }

    /* Ajoute l'en-tête (l'info) comme pseudo-élément */
    table td::before {
        content: attr(data-label) ":"; 
        position: static; /* IMPORTANT: Traite le label comme un élément Flex normal */
        width: 50%; 
        flex-shrink: 0; /* Le label ne rétrécit pas */
        padding-left: 0; 
        font-weight: 600;
        text-align: left;
        color: var(--color-primary);
        word-wrap: break-word; 
        box-sizing: border-box;
    }

    /* Style spécifique pour la première cellule (Nom du PC/Réf) */
    table tr td:first-child {
        display: block !important; 
        text-align: left !important;
        font-size: 1.1em;
        font-weight: bold;
        border-bottom: 1px solid var(--color-primary); 
        margin-bottom: 5px;
        padding-bottom: 10px;
        padding-left: 15px !important; 
    }
    
    table tr td:first-child::before {
        content: ""; 
        padding: 0;
        width: 0;
    }

    /* Correction des boutons (empilement) */
    .action-buttons-wrapper {
        display: flex; 
        flex-direction: column; 
        align-items: stretch; /* Étire les boutons */
        gap: 5px;
        padding-top: 5px;
        width: 100%;
        box-sizing: border-box;
        margin-left: auto; 
    }
    .action-buttons-wrapper button {
        width: 100%; 
        min-width: 120px;
        margin: 0;
    }
    
    /* Correction pour les champs de recherche */
    .list-header {
        flex-direction: column;
        align-items: flex-start;
    }
    .list-header input {
        width: 100%;
        margin-top: 10px;
    }

    /* =======================================
      CORRECTION RESPONSIVE MODALES (POPUPS)
      ======================================= */
    .modal-content {
        margin: 5vh auto; 
        width: 95% !important; 
        max-width: none !important; 
        box-sizing: border-box; 
        padding: 15px; 
    }

    /* Force les champs à s'empiler dans les modales */
    .input-grid {
        grid-template-columns: 1fr; 
        gap: 15px;
    }

    /* Assure que tous les champs et boutons de la modale remplissent l'espace */
    .modal-content input, 
    .modal-content textarea, 
    .modal-content button {
        width: 100% !important;
        box-sizing: border-box;
    }
    
    /* AJOUT SPÉCIFIQUE POP-UP VENTE: S'assurer que les boutons empilés aient de l'espace */
    .modal-content .full-width-button {
        margin-top: 10px !important; 
    }

    /* Empilement des inputs de pièces (Nom/Prix/Bouton Ajouter) */
    .input-group-piece {
        flex-direction: column; 
        gap: 10px;
    }

    /* Correction pour la liste de pièces dans la modale de suivi */
    .piece-item {
        flex-direction: column; 
        align-items: flex-start;
        padding: 8px 10px;
    }

    .piece-item > span {
        width: 100%;
        margin-bottom: 8px; 
        font-size: 1.1em;
    }

    .piece-actions {
        width: 100%;
        flex-wrap: wrap;
        justify-content: space-between; 
    }

    .piece-status {
        min-width: 0; 
        text-align: left;
        margin-right: auto; 
    }

    .piece-actions strong {
        order: -1; 
        margin-right: 10px;
        font-size: 1.1em;
    }

    .piece-actions button {
        flex-grow: 1;
        min-width: 45%; 
        margin-top: 5px;
    }
}